{% extends 'deals/base.html' %}


{% block content %}

<a href="{% url 'deal_adds' %}" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 mb-6 inline-block">
    + New Deal
</a>



<div class="grid gap-4">
    {% for deal in deals %}
    <div class="bg-white p-5 rounded-lg shadow border-l-4 
        {% if deal.probability >= 80 %}border-green-500
        {% elif deal.probability >= 30 %}border-yellow-500
        {% else %}border-red-500{% endif %}">
        
        <div class="flex justify-between items-start">
            <div>
                <h2 class="text-xl font-bold">{{ deal.title }}</h2>
                <p class="text-gray-500">{{ deal.get_stage_display }}</p>
            </div>
            <div class="text-right">
                <p class="text-lg font-bold">â‚±{{ deal.amount }}</p>
                <a href="{% url 'deal_edit' deal.pk %}" class="text-sm text-blue-500 hover:underline">Edit</a>
            </div>
        </div>
        <!-- Progress Bar -->
        <div class="mt-4">
            <div class="flex justify-between text-xs mb-1">
                <span>Probability</span>
                <span>{{ deal.probability }}%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2.5">
                <div class="h-2.5 rounded-full transition-all duration-500
                    {% if deal.probability >= 80 %}bg-green-500
                    {% elif deal.probability >= 30 %}bg-yellow-500
                    {% else %}bg-red-500{% endif %}"
                    style="width: {{ deal.probability }}%">
                </div>
            </div>
        </div>
    </div>
    {% empty %}
    <p class="text-gray-500">No deals yet. Start selling!</p>
    {% endfor %}
</div>
{% endblock %}